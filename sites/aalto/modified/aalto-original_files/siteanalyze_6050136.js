if(_sz&&_sz.core&&_sz.core._isloaded!=null){if(_sz.core.warn){_sz.core.warn("Script requested to load and execute again, this is not desirable and will be blocked")}}else{var _sz=_sz||[];_sz.push(["accountid",6050136]);_sz.push(["region","r1"]);_sz.push(["endpoint","global"]);_sz.push(["custom",function(){function a(){setTimeout(function(){_sz.analytics.state.tracked=false;_sz.analytics.config.cantrack=true;var b=jQuery("#edit-search").val();if(jQuery(".aalto-listing__items").length===0){n=0}else{n=jQuery(".search-results__content__result-count").text().match(/\d+/g).pop()}_sz.push(["sw",b]);_sz.push(["hits",n]);_sz.push(["trackpageview"]);_sz.push(["notrack",false])},1000)}if(window.location.href.indexOf("/search")>-1&&window.jQuery){_sz.analytics.config.cantrack=false;_sz.analytics.state.tracked=true;a();jQuery("#edit-search").on("keydown",function(b){var c=b.keyCode||b.which;if(c===13){a()}})}},"collectSearchStats"]);var _sz=_sz||[];(function(l,b,h,j){var a={curr:window.location.href,ref:b.referrer,esc:function(d){return encodeURIComponent(new String(d).replace(/(\r?\n)+/g," ").replace(/\s+/g," ").replace(/^\s+|\s+$/,""))},empty:function(d){return(d==j||d==null||d=="")},tag:function(d){return(b.getElementsByTagName)?b.getElementsByTagName(d):[]},id:function(d){return(b.getElementById)?b.getElementById(d):false},clone:function(p){var m={};for(var d in p){if(p.hasOwnProperty(d)){m[d]=p[d]}}return m},rnd:function(){return Math.floor(Math.random()*100000)},txt:function(d){return(d.textContent)?d.textContent:d.innerText},uuid:function(){var d=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d())},navtime:function(){var d=l.performance||l.webkitPerformance||l.mozPerformance||l.msPerformance;return !d||!d.timing||d.timing.navigationStart<1?null:(new Date).getTime()-d.timing.navigationStart},_isready:false,_readyhandlers:[],register:function(m,d){d.base=this.actions[m];this.actions[m]=d},actions:{},action:function(m,d){this.actions[m].apply(this.actions,d)},data:[],ready:function(d){if(d===j){return this._isready||a.done()}else{this.when(this.ready,d)}},queueready:function(d){this._isready&&a.done()?d():this._readyhandlers.push(d)},done:function(){return(this._isloaded&&b&&b.body!=null&&(b.readyState=="interactive"||b.readyState=="complete"))},_isloaded:false,_whenTimer:null,when:function(d,o){var m=this.uuid();if(d()){o()}else{setTimeout(function(){a.when(d,o)},50)}},fmt:function(){var d=Array.prototype.slice.call(arguments);var q=d[0];var m=d.slice(1);for(var o=0;o<m.length;o++){var p=new RegExp("\\{"+o+"\\}","gm");q=q.replace(p,m[o])}return q},listen:function(d,m){if(d.addEventListener){d.addEventListener("mousedown",m,false)}else{if(d.attachEvent){d.attachEvent("onmousedown",m)}}},load:function(m){var o=b.createElement("script");o.type="text/javascript";o.async=true;o.src=m;var d=b.getElementsByTagName("script")[0];d.parentNode.insertBefore(o,d)},global:function(d){return(l[d]!==j&&l[d]!==null)?l[d]:null},_images:[],_idx:0,requesturl:function(q,m){var r=[];m.rnd=h.core.rnd();for(d in m){if(this.empty(m[d])){continue}r.push(d+"="+this.esc(m[d]))}var d=this._idx++,s=q+"?"+r.join("&");return s},request:function(m,d){var q=this.requesturl(m,d);this._images[e]=new Image();this._images[e].src="https://"+q;this.log("Requesting {0}",q)},_logqueue:[],_logshown:false,log:function(){this._logqueue.push({type:"msg",msg:Array.prototype.slice.call(arguments)});if(this._logshown){this.showlog()}},warn:function(){this._logqueue.push({type:"warn",msg:Array.prototype.slice.call(arguments)});if(this._logshown){this.showlog()}},showlog:function(){this._logshown=true;var p=b.getElementById("szdebugarea");if(p){p.parentNode.removeChild(p)}a.cookie("szngdebug",1);var t="";for(var q=0;q<this._logqueue.length;q++){var r=this._logqueue[q];t+='<p style="padding:8px;margin:0;margin-bottom:8px;background:#'+(r.type=="msg"?"FFF7C9":"ca0000;color:white")+';">'+((r.type=="warn")?"<b>Warning:</b> ":"")+decodeURIComponent(new String(this.fmt.apply(this,r.msg)).replace(/(&[a-z_]+=|\?)/g,"<br />&nbsp;&nbsp;&nbsp;$1"))+"</p>"}var m,d;d=b.createElement("a");d.href="#";d.innerHTML="\u00D7 Close";d.style.cssText="display:block;float:right;color:black;text-decoration:none;";d.onclick=function(o){m.parentNode.removeChild(m);a._logshown=false;a.cookie("szngdebug",null);return false};m=b.createElement("div");m.style.cssText="position:fixed;top:10px;right:10px;background:white;border:1px #ccc solid;width:800px;padding:20px;padding-bottom:10px;font-size:12px;font-family:Arial;line-height:135%;max-height:90%;overflow-y:auto;text-align:left;z-index:999";m.innerHTML=t;m.id="szdebugarea";m.appendChild(d);b.body.appendChild(m)},cookie:function(u,A,w){if(typeof A!="undefined"){w=w||{path:"/"};if(A===null){A="";w.expires=-1}var s="";if(w.expires&&(typeof w.expires=="number"||w.expires.toUTCString)){var q;if(typeof w.expires=="number"){q=new Date();q.setTime(q.getTime()+(w.expires*24*60*60*1000))}else{q=w.expires}s="; expires="+q.toUTCString()}var x=w.path?"; path="+(w.path):"; path=/";var r=w.domain?"; domain="+(w.domain):"";var z=w.secure?"; secure":"";var y=w.sameSite?"; samesite="+(w.samesite):"; samesite=lax";b.cookie=[u,"=",encodeURIComponent(A),s,x,r,z,y].join("")}else{var p=null;if(b.cookie&&b.cookie!==""){var m=b.cookie.split(";");for(var t=0;t<m.length;t++){var d=m[t].replace(/^\s+|\s+$/g,"");if(d.substring(0,u.length+1)==(u+"=")){p=decodeURIComponent(d.substring(u.length+1));break}}}return p}}};a.register("set",function(m,q){var o=m.split("."),p=h,d;while(o.length>0){d=o.shift();if(p[d]===j){p=0;break}if(o.length==0){break}p=p[d]}(p&&d)?p[d]=q:a.warn("No property named {0}",m)});a.register("register",function(d){a.register(d[0],d[1])});a.register("custom",function(m,p){var o="Running custom function";if(p&&p!=""){o+=": <strong>"+p+"</strong>"}a.log(o);try{m()}catch(d){a.warn("Custom function failed! "+d.message)}});a.register("setcurr",function(d){a.curr=d});a.register("setref",function(d){a.ref=d});a.register("loaded",function(){a._isloaded=true});a.register("showlog",function(){a.showlog()});function g(d){var m=d[0];if(a.actions[m]===j){a.action("set",d)}else{a.action(m,d.slice(1))}}var c=[];var f=[];for(var e=0;e<h.length;e++){c[e]=h[e];f[e]=h[e]}a.data=c;a.ready(function(){for(var d=0;d<f.length;d++){g(f[d])}while(a._readyhandlers.length>0){a._readyhandlers.shift().call()}a._isready=true});h.push=function(d){a.data.push(d);a.ready()?g(d):a.data.push(d)};h.core=a})(window,document,_sz);(function(v,a,s,u){var l={url:v.location.href,ref:a.referrer,title:a.title,res:v.screen.width+"x"+v.screen.height,accountid:"{ACCOUNT_ID}",groups:null,path:null,hits:null,sw:null,ct:null,uid:null,cid:null,cvid:null,rt:s.core.navtime(),prev:null,ourl:null,luid:s.core.uuid(),feedbackid:null,addcid:null,dnt:null,};var b=function(){s.push(["invoketracking"])};var t=b;var h=function(){var d=/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{3,}|[-\w]+\.[-\w]{2})$/i;var w=d.exec(a.domain);return(w&&w.length==1?w[0]:document.domain).replace(/^www\./i,"")};s.analytics={config:{cantrack:true,noonclick:false,ready:true,onClickKey:"szaocHandled"+s.core.rnd(),},cookie:{name:"nmstat",domain:h(),expires:1000,secure:false,},endpoint:{configured:false,host:"{ACCOUNT_ID}.global",domain:"siteimproveanalytics.io",path:"image.aspx",fullpath:function(d,w){s.analytics.endpoint.configure();if(!w){w=d;d=this.host}return((d||this.host)+"."+this.domain+"/"+(w||this.path))},configure:function(){if(!s.analytics.endpoint.configured){s.analytics.endpoint.host=s.analytics.endpoint.host.replace("{ACCOUNT_ID}",l.accountid||"shared");s.core.log("Configured host: {0}.{1}",s.analytics.endpoint.host,s.analytics.endpoint.domain);s.analytics.endpoint.configured=true}},},state:{requested:false,requestTime:new Date(),tracked:false,onclickattached:false,},region:"",getRootDomain:h,replaceTracker:function(d){t=typeof d==="function"?d:b},opts:function(d){return l[d]},getsessid:function(){if(s.analytics.config.cantrack){var w=s.core.cookie(s.analytics.cookie.name);if(!w){w=s.core.uuid();var d={expires:s.analytics.cookie.expires,domain:s.analytics.cookie.domain,secure:s.analytics.cookie.secure,};s.core.cookie(s.analytics.cookie.name,w,d);var x=s.core.cookie(s.analytics.cookie.name);if(!x){s.core.log("Failed to set cookie at domain '{0}', using fallback domain '{1}' instead",s.analytics.cookie.domain,document.domain);d.domain=document.domain;s.core.cookie(s.analytics.cookie.name,w,d)}}return w}else{return""}},};function o(w,d){d.prev=s.analytics.getsessid();d.rt=d.rt!==null?s.core.navtime():null;s.core.request(w,d)}function p(w,d){d.prev=s.analytics.getsessid();return s.core.requesturl(w,d)}function m(y){if(!s.analytics.config.cantrack||s.analytics.state.onclickattached){return}var z=function(C){try{if(C.href==null||C.href==""||C.href.toLowerCase().indexOf("javascript:")==0||C.href.indexOf("#")==0||C.href.charAt(C.href.length-1)=="#"||C.href==v.location.href||C.href.indexOf(v.location.href+"#")==0||C[s.analytics.config.onClickKey]===true){return true}if(!(y instanceof Array)){return false}for(var B=0;B<y.length;B++){if(C.href.indexOf(y[B])!==-1){return true}}return false}catch(A){return true}};var d=s.core.tag("a");var w=s.core.tag("area");var x=function(C){for(var A=0;A<C.length;A++){var B=C[A];if(z(B)){continue}(function(D){s.core.listen(D,function(){s.push(["request",{ourl:D.href,ref:v.location.href,autoonclick:1,rt:null,},])});B[s.analytics.config.onClickKey]=true})(B)}};s.core.log("Attaching onclick handlers");x(d);x(w);s.analytics.state.onclickattached=true}var c=0;function e(w,d,x){return{aid:l.accountid,url:l.url,luid:l.luid,c:w,a:d,l:x,cid:l.cid,cvid:l.cvid,o:++c,d:Math.round((new Date()-s.analytics.state.requestTime)/1000),}}var q=0;function r(x,d){var w={aid:l.accountid,url:l.url,luid:l.luid,search_term:x,cid:l.cid,cvid:l.cvid,o:++q,d:Math.round((new Date()-s.analytics.state.requestTime)/1000),};if(d!=null){w.results=d}return w}var f=0;function g(w,y,z,d){var x={aid:l.accountid,url:l.url,luid:l.luid,feedback_id:w,sluid:y,cid:l.cid,cvid:l.cvid,o:++f,d:Math.round((new Date()-s.analytics.state.requestTime)/1000),};if(z!=null&&typeof z=="number"){x.rating=z}if(d){x.comment=d}return x}function j(){var d=window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack;return(d=="yes"||d=="1"||(window.external&&window.external.msTrackingProtectionEnabled&&window.external.msTrackingProtectionEnabled()))}s.core.register("endpoint",function(d){if(d){if(d.indexOf("{ACCOUNT_ID}")<0){s.analytics.endpoint.host="{ACCOUNT_ID}."+d}else{s.analytics.endpoint.host=d}s.analytics.endpoint.configured=false;s.analytics.endpoint.configure()}else{s.core.warn("Could not reconfigure endpoint host.")}});s.core.register("region",function(d){if(d){s.core.log("Setting analytics region to: {0}",d);s.analytics.region=d}else{s.core.warn("Could not configure analytics region.")}});s.core.register("eventurl",function(x,d,y,w){if(!w){s.core.warn("You must provide a callback function");return}if(!x||!d){s.core.warn("Category and action must be provided for event.");return}else{if(!s.analytics.config.cantrack){return}}var z=p(s.analytics.endpoint.fullpath("event.aspx"),e(x,d,y));w(z)});s.core.register("event",function(w,d,x){if(!w||!d){s.core.warn("Category and action must be provided for event.");return}else{if(!s.analytics.config.cantrack){return}}o(s.analytics.endpoint.fullpath("event.aspx"),e(w,d,x))});s.core.register("search",function(w,d){if(!w){s.core.warn("Search term must be provided for searches.");return}else{if(!s.analytics.config.cantrack){return}}o(s.analytics.endpoint.fullpath("search.aspx"),r(w,d))});s.core.register("feedback_view",function(d,w){if(!s.analytics.config.cantrack){return}if(!d){s.core.warn("Feedback id must be provided for feedback views.");return}if(!w){s.core.warn("Feedback log id must be provided for feedback views.");return}o(s.analytics.endpoint.fullpath("surveyview.aspx"),g(d,w))});s.core.register("feedback_response",function(w,x,y,d){if(!s.analytics.config.cantrack){return}if(!w){s.core.warn("Feedback id must be provided for feedback responses.");return}if(!x){s.core.warn("Feedback log id must be provided for feedback responses.");return}if((y==null||y<1)&&!d){s.core.warn("Feedback responses must provide either a rating or a comment.");return}o(s.analytics.endpoint.fullpath("surveyresponse.aspx"),g(w,x,y,d))});s.core.register("dump",function(){console.debug(s.analytics);console.debug(l)});s.core.register("noonclick",function(d){s.analytics.config.noonclick=d});s.core.register("set",function(d,w){if(l.hasOwnProperty(d)){l[d]=w}else{this.set.base(d,w)}});s.core.register("breadcrumbs",function(w){if(!w||!a.querySelector){return}var d=a.querySelector(w);if(d){l.path=s.core.txt(d)}});s.core.register("groupselector",function(y){if(!y||!a.querySelectorAll){return}var x=a.querySelectorAll(y),d=[];if(l.groups){d.push(l.groups)}for(var w=0;w<x.length;w++){var z=s.core.txt(x[w]);if(z!=null){d.push(z)}}if(d.length>0){l.groups=d.join(",");s.core.log("Groups set: {0}",d.join(", "))}});s.core.register("metagroupname",function(y){var x=s.core.tag("meta"),d=[];if(l.groups){d.push(l.groups)}for(var w=0;w<x.length;w++){if(x[w].name==y){s.core.log("Metagroup pushing group: {0}",x[w].content);d.push(x[w].content)}}if(d.length>0){l.groups=d.join(",");s.core.log("Metagroup set: {0}",d.join(", "))}});s.core.register("param",function(d,w){if(typeof d=="object"){for(i in d){if(d.hasOwnProperty(i)){s.push(["param",i,d[i]])}}}else{s.core.log("Param {0} = {1}",d,w);l["grk_"+d]=w}});s.core.register("request",function(d){if(d.accountid===u){d.accountid=l.accountid}o(s.analytics.endpoint.fullpath(),d)});s.core.register("trackpageview",function(){var d=s.analytics;if(!d.state.tracked&&d.config.cantrack&&d.config.ready){o(d.endpoint.fullpath(),l);d.state.tracked=true;d.state.requestTime=new Date();if(l.sw){s.push(["search",l.sw,l.hits])}}else{if(d.state.tracked){s.core.log("Already tracked...")}}});s.core.register("notrack",function(d){if(d===u){d=true}if(d){s.core.cookie("sz_notrack","true",{expires:1825})}else{s.core.cookie("sz_notrack",null)}s.analytics.config.cantrack=!d});s.tracking=function(){return s.analytics.config.cantrack};s.donottrack=function(){return l.dnt===true&&!!j()};s.core.register("trackdynamic",function(x){var d=l.url;l.url=v.location.href;l.ref=d;l.title=a.title;l.luid=s.core.uuid();l.rt=null;l.ourl=null;l.groups=null;l.path=null;l.hits=null;l.sw=null;s.analytics.state.tracked=false;s.analytics.state.onclickattached=false;if(x){if(typeof x=="object"&&!(x instanceof Array)){for(k in x){if(x.hasOwnProperty(k)){s.push([k,x[k]])}}}else{if(x.length>0){for(var w=0;w<x.length;w++){s.push(x[w])}}}}if(!l.ourl){l.ourl=l.url}s.push(["invoketracking"])});s.core.register("invoketracking",function(){if(!!s.analytics.config.cantrack&&s.donottrack()){s.core.log("Do not track enabled");s.analytics.config.cantrack=false}if(!s.analytics.config.cantrack){s.core.log("Tracking not enabled, skipping invocation");return}s.push(["trackpageview"]);if(s.analytics.config.noonclick!==true){m(s.analytics.config.noonclick)}});s.core.ready(function(){s.core.log("Running ready at {0}",new Date().getTime());if(s.core.cookie("sz_notrack")!==null){s.push(["notrack"])}t()})})(window,document,_sz);_sz.core._isloaded=true};