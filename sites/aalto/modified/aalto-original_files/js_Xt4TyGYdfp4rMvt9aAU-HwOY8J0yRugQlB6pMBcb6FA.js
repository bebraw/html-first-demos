/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
'use strict';(function(Drupal){const isSafari=navigator.vendor&&navigator.vendor.indexOf('Apple')>-1&&navigator.userAgent&&navigator.userAgent.indexOf('CriOS')===-1&&navigator.userAgent.indexOf('FxiOS')===-1;if(isSafari===true){const resizeHandler=Drupal.behaviors.aalto_utils.debounce(function(){var imgSrc=document.querySelectorAll('img[sizes], source[sizes]');for(let i=0;i<imgSrc.length;i++)imgSrc[i].sizes+='';},50);window.addEventListener('resize',resizeHandler);}})(Drupal);;
'use strict';(function(Drupal,once){const HEADER_OFFSET=120;function scrollToElement(targetElement){if(!targetElement)return;const initialRect=targetElement.getBoundingClientRect();let initialOffset=initialRect.top;let scrollAdjustment=initialOffset-HEADER_OFFSET;let newScrollPosition=window.scrollY+scrollAdjustment;window.scrollTo({top:newScrollPosition,behavior:'auto'});const adjustPosition=(attemptCount=1,maxAttempts=5)=>{if(attemptCount>maxAttempts)return;const newRect=targetElement.getBoundingClientRect();if(Math.abs(newRect.top-HEADER_OFFSET)>5){const preciseAdjustment=newRect.top-HEADER_OFFSET;const finalScrollPosition=window.scrollY+preciseAdjustment;window.scrollTo({top:finalScrollPosition,behavior:'auto'});setTimeout(()=>{adjustPosition(attemptCount+1,maxAttempts);},150*attemptCount);}};setTimeout(()=>{adjustPosition();},200);setTimeout(()=>{adjustPosition();},1000);}Drupal.behaviors.aalto_anchor_links={attach:function attach(context){once('aalto_anchor_links','html',context).forEach(function(){const anchorLinks=[];const titleComponents=['.aalto-component .component-container > h2','.aalto-component .text-text h2','.aalto-component .text-text h3','.aalto-manual-liftup__header-title','.aalto-tiles-layout__header','.aalto-component .image-with-text-adaptive__text h2, .aalto-component .image-with-text-adaptive__text h3','.aalto-component .image-with-text-default__text h2, .aalto-component .image-with-text-default__text h3','.aalto-component .quick-links > h2','.aalto-component .highlight-quicklinks__title > h2','.aalto-component .aalto-quick-donation__heading','.aalto-component .aalto-donation__heading','.aalto-component .aalto-research-items-container__header > h2','.aalto-component .aalto-slider__header > h2','.aalto-component .aalto-some-module__title','.aalto-component .aalto-some-banner__title','.aalto-anchor-link-heading','.aalto-component .paragraph--text-accordion .accordion__container > h2','.service-index__section-related--title'];const availableAnchorLinks=[];const tocContainer=document.querySelector('.aalto-table-of-contents');const tocRemovable=tocContainer?tocContainer.querySelector('.js-remove'):null;const tocEl=tocRemovable?tocRemovable.parentNode:null;const hasToc=!!tocEl;const tocFragment=hasToc?document.createDocumentFragment():null;const titleElements=document.querySelectorAll(titleComponents);titleElements.forEach((title,index)=>{const elementName=title.nodeName;const anchorName=index+'-'+title.textContent.toLowerCase().trim().replace(/ä/gi,'a').replace(/ö/gi,'o').replace(/å/gi,'a').replace(/\W/g,'-');anchorLinks.push(title.textContent.trim());availableAnchorLinks.push(anchorName);if(hasToc&&!title.classList.contains('aalto-anchor-link-skip-toc')){const tocLinkContainer=document.createElement('div');tocLinkContainer.className='aalto-anchor';const tocLink=document.createElement('a');tocLink.className='aalto-anchor__'+elementName.toLowerCase();tocLink.href='#'+anchorName;tocLink.textContent=title.textContent.trim();tocLinkContainer.append(tocLink);tocFragment.append(tocLinkContainer);}title.classList.add('js-anchor-link');const button=document.createElement('button');button.type='button';button.className='js-anchor-link-icon';button.ariaLabel=Drupal.t('Copy link to this section');title.append(button);if(title.id!==''&&document.querySelector('[aria-labelledby="'+title.id+'"]'))document.querySelector('[aria-labelledby="'+title.id+'"]').setAttribute('aria-labelledby',anchorName);title.id=anchorName;const a=document.createElement('a');a.name=anchorName;title.parentNode.insertBefore(a,title);});if(hasToc)tocEl.append(tocFragment);if(document.querySelector('.js-remove'))document.querySelector('.js-remove').remove();Drupal.behaviors.aalto_utils.addListenerIfExistsByClass('js-anchor-link','click',function copyLinkAndShowNotification(event){const fullUrl=window.location.href;const url=fullUrl.split('#')[0];const savedThis=this;if((!this.querySelector('.js-anchor-link-text')&&event.target.classList.contains('js-anchor-link')&&!event.target.classList.contains('accordion__title'))||(!this.querySelector('.js-anchor-link-text')&&event.target.classList.contains('js-anchor-link-icon'))){Drupal.behaviors.aalto_utils.copyToClipboard(url+'#'+this.id);this.querySelector('.js-anchor-link-icon').focus();if(this.querySelector('.js-anchor-link-icon'))this.querySelector('.js-anchor-link-icon').ariaLabel='';const notification=document.createElement('span');notification.className='js-anchor-link-text js-remove-delay';notification.ariaLive='polite';notification.textContent=Drupal.t('Link copied to clipboard');this.append(notification);}if(this.querySelector('.js-anchor-link-text'))this.querySelector('.js-anchor-link-text').classList.add('js-anchor-link-copied');setTimeout(function removeNotification(){if(savedThis.querySelector('.js-remove-delay'))savedThis.querySelector('.js-remove-delay').remove();if(savedThis.querySelector('.js-anchor-link-icon'))savedThis.querySelector('.js-anchor-link-icon').ariaLabel=Drupal.t('Copy link to this section');},3500);});Drupal.behaviors.aalto_utils.addListenerIfExists('datahub-copy-to-clipboard-current-url','click',function copyLinkToClipboard(){const currentUrl=window.location.href;const textContainer=document.getElementById('aalto-footer__link-copied-notification');const status=Drupal.behaviors.aalto_utils.copyToClipboard(currentUrl);Drupal.behaviors.aalto_utils.showStatusOfCopyToClipboard(textContainer,Drupal.t('Link copied to clipboard'),!status,Drupal.t('Copying link failed'));});if(window.location.hash){const targetId=window.location.hash.slice(1);if(availableAnchorLinks.includes(targetId)){}else{const hashSuffix=window.location.hash.indexOf('-')>0?window.location.hash.slice(window.location.hash.indexOf('-')):null;if(hashSuffix){const matchingAnchor=availableAnchorLinks.find((anchorName)=>anchorName.slice(anchorName.indexOf('-'))===hashSuffix);if(matchingAnchor){const newUrlWithRightHash=window.location.origin+window.location.pathname+'#'+matchingAnchor;window.history.pushState({},'',newUrlWithRightHash);}}}setTimeout(function(){const updatedTargetId=window.location.hash.slice(1);const targetElement=document.getElementById(updatedTargetId);if(targetElement)scrollToElement(targetElement);},1000);}document.body.addEventListener('click',function(e){const anchor=e.target.closest('a[href^="#"]');if(anchor&&anchor.getAttribute('href').length>1){const hash=anchor.getAttribute('href');const targetId=hash.slice(1);const targetElement=document.getElementById(targetId);if(targetElement){e.preventDefault();window.history.pushState(null,null,hash);scrollToElement(targetElement);}}});document.addEventListener('CookiebotOnAccept',function(){if(window.location.hash){const targetId=window.location.hash.slice(1);const targetElement=document.getElementById(targetId);if(targetElement)setTimeout(function(){scrollToElement(targetElement);},500);}});document.querySelectorAll('iframe').forEach((iframe)=>{iframe.addEventListener('load',function(){if(window.location.hash){const targetId=window.location.hash.slice(1);const targetElement=document.getElementById(targetId);if(targetElement){const rect=targetElement.getBoundingClientRect();if(Math.abs(rect.top-HEADER_OFFSET)<1000)scrollToElement(targetElement);}}});});});}};})(Drupal,once);;
'use strict';(function(Drupal,drupalSettings,once){Drupal.behaviors.aalto_back_to_top={attach:function attach(context){once('aalto_back_to_top','html',context).forEach(function(){const mainContentContainer=context.querySelector('.layout-content');const scrollTopButton="<a href='#main-content' id='scroll-to-top-button' aria-label='"+Drupal.t('Back to top of content',{},{context:'Scroll to top button'})+"' class='aalto-scroll-up'>"+'<svg class="aalto-inline-icon" aria-hidden="true"> '+'<use xlink:href="'+drupalSettings.path.themeUrl+'/images/icons.svg#16-arrow_chevron_up" /> '+'</svg> '+Drupal.t('Top',{},{context:'Scroll to top button'})+'</a>';if(mainContentContainer)mainContentContainer.insertAdjacentHTML('beforeend',scrollTopButton);function showOrHideBackToTopButton(){const yOffset=window.pageYOffset;if(yOffset>window.innerHeight&&document.querySelector('#scroll-to-top-button')){if(!document.querySelector('#scroll-to-top-button').classList.contains('visible'))document.querySelector('#scroll-to-top-button').classList.add('visible');}else{if(document.querySelector('#scroll-to-top-button')&&document.querySelector('#scroll-to-top-button').classList.contains('visible'))document.querySelector('#scroll-to-top-button').classList.remove('visible');}}window.addEventListener('load',showOrHideBackToTopButton,{once:true,passive:true});window.addEventListener('scroll',showOrHideBackToTopButton,{passive:true});});}};})(Drupal,drupalSettings,once);;
(function(Drupal,drupalSettings,once){'use strict';Drupal.behaviors.aalto_language_switcher={attach:function(context,settings){once('aalto_language_switcher','html',context).forEach(function(){context.querySelectorAll('.language-version-missing').forEach((languageOption)=>{languageOption.addEventListener('click',(event)=>{const targetLanguage=event.currentTarget.getAttribute('lang');let placeAfterElement=event.currentTarget;if(placeAfterElement.classList.contains('aalto-dropdown__link')||placeAfterElement.classList.contains('aalto-topnav__action--mobile'))placeAfterElement=document.getElementById('aalto-topnav');if(drupalSettings.languageSwitcher.modalContent[targetLanguage])Drupal.behaviors.aalto_utils.createDialog(event,context,'aalto-language-switch-dialog','aalto-dialog-language-switch-label','aalto-dialog-language-switch-content',drupalSettings.languageSwitcher.modalContent[targetLanguage],placeAfterElement,'language-switcher');});});});}};})(Drupal,drupalSettings,once);;
/* @license MIT https://raw.githubusercontent.com/js-cookie/js-cookie/v3.0.5/LICENSE */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.Cookies,o=e.Cookies=t();o.noConflict=function(){return e.Cookies=n,o;};}());}(this,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o];}return e;}var t=function t(n,o){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof (i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+c;}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},r=0;r<t.length;r++){var i=t[r].split("="),c=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(o[u]=n.read(c,u),e===u)break;}catch(e){}}return e?o[e]:o;}},remove:function(t,n){r(t,"",e({},n,{expires:-1}));},withAttributes:function(n){return t(this.converter,e({},this.attributes,n));},withConverter:function(n){return t(e({},this.converter,n),this.attributes);}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}});}({read:function(e){return '"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent);}},{path:"/"});return t;}));;
/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal,window,document,cookies,once){'use strict';var $window=$(window);var $document=$(document);var consentGivenEventName='cookieContentBlockerConsentGiven';var consentChangedEventName='cookieContentBlockerChangeConsent';var cookieContentBlockerSettings=null;var specialEventSelectors={window:$window,document:$document};var consentChangeCallback=function(event){event.preventDefault();$window.trigger(consentChangedEventName);var triggerEvent=function(event){var $specialTarget=specialEventSelectors[event.selector];if($specialTarget===void (0)){$(event.selector).trigger(event.name);return;}$specialTarget.trigger(event.name);};$.each(cookieContentBlockerSettings.categories,function(id,category){triggerEvent(category.consentAwareness.change.event);});triggerEvent(cookieContentBlockerSettings.consentAwareness.change.event);};var matchCookieValue=function(cookieMatch){if(typeof cookieMatch.name!=='string'||typeof cookieMatch.value!=='string')return false;var currentValue=cookies.get(cookieMatch.name);if(currentValue===null||currentValue===void (0))return cookieMatch.operator==='!e';var matchMap={'e':function(){return true;},'===':function(v){return currentValue===v;},'>':function(v){return currentValue>v;},'<':function(v){return currentValue<v;},'c':function(v){return currentValue.indexOf(v)>=0;},'!c':function(v){return currentValue.indexOf(v)===-1;}};return (matchMap[cookieMatch.operator]!==void (0)&&matchMap[cookieMatch.operator](cookieMatch.value)||false);};Drupal.behaviors.cookieContentBlocker={initialized:false,getConsent:function(){var consent={categories:{},general:false};const queryString=window.location.search;const params=new URLSearchParams(queryString);$.each(cookieContentBlockerSettings.categories,function(id,category){consent.categories[id]=params.has("CookieContentBlockerCookieAccepted")||params.has("CookieContentBlockerCookieAccepted"+id.charAt(0).toUpperCase()+id.slice(1))||matchCookieValue(category.consentAwareness.accepted.cookie);});if(params.has("CookieContentBlockerCookieAccepted")||matchCookieValue(cookieContentBlockerSettings.consentAwareness.accepted.cookie)){consent.general=true;return consent;}if(matchCookieValue(cookieContentBlockerSettings.consentAwareness.declined.cookie))consent.general=false;return consent;},attachConsentEventListeners:function(context){$.each(cookieContentBlockerSettings.categories,function(id,category){Drupal.behaviors.cookieContentBlocker.attachConsentEventListener(context,category.consentAwareness.accepted.event);});Drupal.behaviors.cookieContentBlocker.attachConsentEventListener(context,cookieContentBlockerSettings.consentAwareness.accepted.event);if(Drupal.behaviors.cookieContentBlocker.initialized)return;$window.on(consentGivenEventName,function(){Drupal.behaviors.cookieContentBlocker.handleConsent();});},attachConsentEventListener:function(context,event){var $specialTarget=specialEventSelectors[event.selector];var isSpecialTarget=$specialTarget!==void (0);if(!isSpecialTarget)$(event.selector).on(event.name,function(){Drupal.behaviors.cookieContentBlocker.handleConsent(context);});if(Drupal.behaviors.cookieContentBlocker.initialized||!isSpecialTarget)return;$specialTarget.on(event.name,function(){Drupal.behaviors.cookieContentBlocker.handleConsent();});},attachConsentEventTriggers:function(context){once('cookie-content-blocker','.js-cookie-content-blocker-consent-change-button, .js-cookie-content-blocker-click-consent-change',context).forEach(function(button){$(button).on('click',consentChangeCallback);});},attach:function(context,settings){if(cookieContentBlockerSettings===null)cookieContentBlockerSettings=settings.cookieContentBlocker;Drupal.behaviors.cookieContentBlocker.handleConsent(context);Drupal.behaviors.cookieContentBlocker.attachConsentEventListeners(context);Drupal.behaviors.cookieContentBlocker.attachConsentEventTriggers(context);Drupal.behaviors.cookieContentBlocker.initialized=true;},handleConsent:function(context){if(context===void (0))context=document;var consent=Drupal.behaviors.cookieContentBlocker.getConsent();if(consent.general===true){Drupal.behaviors.cookieContentBlocker.loadBlockedContent(context);Drupal.behaviors.cookieContentBlocker.loadBlockedAssets();}for(var category in consent.categories){if(!consent.categories.hasOwnProperty(category)||consent.categories[category]!==true)continue;Drupal.behaviors.cookieContentBlocker.loadBlockedContent(context,category);Drupal.behaviors.cookieContentBlocker.loadBlockedAssets(category);}},handleCookieAccepted:function(context){Drupal.behaviors.cookieContentBlocker.handleConsent(context);},loadBlockedContent:function(context,category){var selector=category?".js-cookie-content-blocker-content[data-category='"+category+"']":'.js-cookie-content-blocker-content:not([data-category])';$(selector,context).each(function(){var $originalContentWrapperScript=$(this);var $blocker=$originalContentWrapperScript.closest('.js-cookie-content-blocker');var originalContent=$originalContentWrapperScript.text();originalContent=originalContent.replace(/(<[/]?script)fake/g,'$1');originalContent=originalContent.replace('//<![CDATA[','').replace('//]]>','');var replaceContent=function($wrapper){var parent=$wrapper.parent().get(0);$wrapper.replaceWith(originalContent);Drupal.attachBehaviors(parent);};replaceContent($blocker.length?$blocker:$originalContentWrapperScript);});},loadBlockedAssets:function(category){if(cookieContentBlockerSettings.blockedAssets===void (0))return;var originalBehaviors=$.extend(true,{},Drupal.behaviors);var selector=category?"[data-cookie-content-blocker-asset-id][data-categories]":'[data-cookie-content-blocker-asset-id]:not([data-categories])';$(selector).each(function(){var $blockedAsset=$(this);var id=$blockedAsset.data('cookie-content-blocker-asset-id');if(!(id in cookieContentBlockerSettings.blockedAssets))return;if(category&&!$blockedAsset.data('categories').includes(category))return;$blockedAsset.replaceWith(cookieContentBlockerSettings.blockedAssets[id]);});$.each(Drupal.behaviors,function(name,behavior){if(!originalBehaviors[name]&&$.isFunction(behavior.attach))behavior.attach(document,window.drupalSettings);});}};})(jQuery,Drupal,window,document,window.Cookies,once);;
